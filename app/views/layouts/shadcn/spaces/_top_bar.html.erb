<!-- Top Bar -->
<div class="flex items-center justify-end h-14 px-6 bg-background">

  <% if user_signed_in? %>
    <div class="relative group">

      <!-- Trigger -->
      <button
        class="inline-flex items-center gap-2 rounded-md px-3 h-8 text-sm font-medium
               hover:bg-accent hover:text-accent-foreground
               focus-visible:outline-none focus-visible:ring-2
               focus-visible:ring-ring focus-visible:ring-offset-2
               transition-colors"
      >
        <svg xmlns="http://www.w3.org/2000/svg"
             class="size-4"
             fill="none"
             viewBox="0 0 24 24"
             stroke="currentColor"
             stroke-width="2">
          <path stroke-linecap="round"
                stroke-linejoin="round"
                d="M20 21a8 8 0 1 0-16 0M12 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"/>
        </svg>

        <span class="hidden sm:inline">
          <%= current_user.email %>
        </span>
      </button>

      <!-- Dropdown -->
      <div class="absolute right-0 mt-2 w-56 rounded-md border bg-popover text-popover-foreground shadow-md
                  opacity-0 invisible group-hover:visible group-hover:opacity-100
                  transition-all duration-150 z-50">

        <div class="p-1">

          <%= link_to edit_user_registration_path,
                class: "flex w-full items-center rounded-sm px-2 py-1.5 text-sm
                        hover:bg-accent hover:text-accent-foreground" do %>
            Profile Settings
          <% end %>

          <div class="h-px bg-border my-1"></div>

          <%= button_to destroy_user_session_path,
                method: :delete,
                form: { class: "w-full" },
                class: "flex w-full items-center rounded-sm px-2 py-1.5 text-sm
                        hover:bg-accent hover:text-accent-foreground text-left cursor-pointer" do %>
            Logout
          <% end %>

        </div>
      </div>

    </div>
  <% end %>

</div>